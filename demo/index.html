<!DOCTYPE html>
<head>
  <title>ACT For Kids </title>
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <script src="js/jquery-1.7.js"></script>
  <script src="js/bootstrap-modal.js"></script>
  <style>
    #keypad {
      width: 280px;
      margin-left: -140px;
    }
    
    #keypad table tr td {
      border: none;
    }
    
    #keypad .modal-body button {
      padding: 10px 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h3>On duty:</h3>
    <ul id="on-duty" class="media-grid">
    </ul>
    <hr/>
    <h3>Off duty:</h3>
    <ul id="off-duty" class="media-grid">
    </ul>
  </div>

  <div id="keypad" class="modal hide fade">
    <div class="modal-header">
      <a href="#" class="close">&times;</a>
      <h3>Please enter your PIN:</h3>
    </div>
    <div class="modal-body">
      <div class="well">
        <input id="PIN" type="password" />
        <table>
          <tr>
            <td><button class="btn" onclick="appendKey('1');">1</button></td>
            <td><button class="btn" onclick="appendKey('2');">2</button></td>
            <td><button class="btn" onclick="appendKey('3');">3</button></td>
          </tr>
          <tr>
            <td><button class="btn" onclick="appendKey('4');">4</button></td>
            <td><button class="btn" onclick="appendKey('5');">5</button></td>
            <td><button class="btn" onclick="appendKey('6');">6</button></td>
          </tr>
          <tr>
            <td><button class="btn" onclick="appendKey('7');">7</button></td>
            <td><button class="btn" onclick="appendKey('8');">8</button></td>
            <td><button class="btn" onclick="appendKey('9');">9</button></td>
          </tr>
          <tr>
            <td></td>
            <td><button class="btn" onclick="appendKey('0');">0</button></td>
            <td></td>
          </tr>
        </table>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn primary" onclick="$('#keypad').modal('hide');switchList();">OK</button>
      <button class="btn secondary" onclick="$('#keypad').modal('hide');">Cancel</button>
    </div>
  </div>

  <script>
    var selected;
    
    function appendKey(key) {
      var PIN = $('#PIN');
      var value = PIN.val();
      PIN.val(value + key);
    }
    
    function createAvatar(parentSelector, id) {
      var avatar = '<li><a><img id="' + id + '" class="thumbnail" ' + 
        'src="avatars/profile-210px.jpg" ' +
        'onclick="requestPIN(\'' + id + '\');" ' + 
        '/></a></li>';
      $(parentSelector).append(avatar);
    }
    
    function requestPIN(id) {
      selected = id;
      $('#keypad').modal({
          backdrop: 'static'
      });
    }
    
    function switchList() {
      var li = $('#' + selected).parent().parent();
      var target;
        
      selected = li;
      
      if (li.parent().attr('id') == 'on-duty') {
        target = '#off-duty';
      } else {
        target = '#on-duty';
      }
      li.remove();
      $(target).append(li);
    }
    
    for (i = 0; i < 10; i++) {
      var list = '#on-duty';
      if (i > 1) {
        list = '#off-duty';
      }
      createAvatar(list, 'avatar-' + i);
    }
  </script>
</body>
</html>
