
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Craig Aspinall</title>
  <meta name="author" content="Craig Aspinall">

  
  <meta name="description" content="I have a dilemma. I love Apple products. I love the hardware. I love the software. I love the presentation. I love that their products are &#8220; &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.craigaspinall.com/blog/page/3">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/Craigaspinallcom" rel="alternate" title="Craig Aspinall" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-23870858-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Craig Aspinall</a></h1>
  
    <h2>nani gigantum humeris insidentes</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/Craigaspinallcom" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.craigaspinall.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/14/is-apple-an-abusive-partner/">Is Apple an Abusive Partner?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-14T00:00:00+10:00" pubdate data-updated="true">Nov 14<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have a dilemma. I love Apple products. I love the hardware. I love the software. I love the presentation. I love that their products are &#8220;friendly&#8221;. But I also see an ugly side to Apple. The side that is cold, ruthless and oppressive.The side that decides what is good for it&#8217;s customers and what isn&#8217;t. Do I want to continue is a relationship with a partner that gives me beautiful things but makes all my decisions for me?</p>
<p>Alarm bells started ringing when Apple started making arbitrary decisions about approvals to the App Store. <a href="http://techcrunch.com/2009/07/27/apple-is-growing-rotten-to-the-core-and-its-likely-atts-fault/">Blocking Google Voice</a> was a big mental hurdle for me. Apple&#8217;s excuse that it replicated functionality that already existed in the incumbent phone application seemed to be stretching the truth.</p>
<p>The next warning was <a href="http://daringfireball.net/2010/04/iphone_agreement_bans_flash_compiler">section 3.3.1</a> of the <span class="caps">SDK</span> license, which prevented anyone from using anything other than sanctioned programming languages to create applications for iOS devices. This sent them into a bitter war with Adobe. Apple had already refused to allow Flash into iOS, prompting Adobe to invest in cross compiling to native iOS devices. Almost antagonistically, Apple introduced the new restriction just before Adobe launched their new Creative Suite!</p>
<p>The latest slap in the face was the announcement to <a href="http://developer.apple.com/library/mac/#releasenotes/Java/JavaSnowLeopardUpdate3LeopardUpdate8RN/NewandNoteworthy/NewandNoteworthy.html%23//apple_ref/doc/uid/TP40010380-CH4-SW1">drop support for Java</a> from OS X 10.7. It felt like Apple was systematically removing anything but it&#8217;s own technology from their system. Up until now, I liked being in Apple&#8217;s walled garden because things just work there, but when the walls are closing in, it&#8217;s time to find a way out!</p>
<p>There are some positive signs however. The restrictions in section 3.3.1 <a href="http://www.apple.com/pr/library/2010/09/09statement.html">have been relaxed</a> and Apple is going to <a href="http://www.apple.com/pr/library/2010/11/12openjdk.html">contribute to the OpenJDK effort</a>, which I think is definitely the &#8220;right thing&#8221; to do. The question is whether these concessions are just to lull us into a false sense of security before the next sucker punch, like the Mac App Store for example?</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/13/minty-macbook/">Mmmmm&#8230; Minty Macbook!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-13T00:00:00+10:00" pubdate data-updated="true">Nov 13<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>When I started on my current project and got a new developer workstation, I took advantage of an official <a href="http://www.ubuntu.com/">Ubuntu</a> distribution sanctioned for use within the company. Apart from a few wrinkles with the authentication against the Windows domains, it has been a real pleasure to use, so when I rebuilt my MacBook recently, I decided that I would use <a href="http://www.apple.com/support/bootcamp/">Bootcamp</a> and tri-boot it (Max OS X, Windows 7 and Linux).</p>
<p>I started out with the regular Ubuntu distribution, but it didn&#8217;t seem to work all that well. It certainly wasn&#8217;t a slick as it is on my workstation at work. I was having problems with the trackpad and the wifi adapter in particular. Then someone recommended <a href="http://www.linuxmint.com/">Linux Mint</a>, so I scrapped Ubuntu and installed that instead.</p>
<p>It installed straight away and everything aside from the iSight camera worked immediately. It can access the OS X and Windows 7 partitions and even the MP4 video and MP3 audio codecs were installed so I could play back my media from my iTunes library.</p>
<p>On top of that, it performs snappily and it still has the excellent package management of Ubuntu. I was even more pleasantly surprised when it paired with my iPhone and connected to the internet on the first attempt!</p>
<p>So if you&#8217;ve been thinking about giving Linux a whirl, then Linux Mint is a really good, low fuss candidate.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/12/meetings-are-toxic/">Meetings Are Toxic</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-12T00:00:00+10:00" pubdate data-updated="true">Nov 12<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>That is the title of a chapter in Jason Fried and David Heinemeier Hansson&#8217;s (<a href="http://37signals.com/">37signals</a>) book, <a href="http://37signals.com/rework/">Rework</a>, and I have to admit that I agree with them. I&#8217;ll also admit that I&#8217;m a little jaded by the number of unproductive meetings that I&#8217;ve attended in my career, so my view may be tainted!</p>
<p>One of the key points in the book is that meetings are terribly expensive. A one hour meeting between 10 people is a 10 hour meeting. That&#8217;s before you factor in the cost of stopping what your doing, or any preparation work. It&#8217;s at least a day and a half of productivity gone! Sadly most people don&#8217;t think about that when they book meetings.</p>
<p>There are three problems with most meetings that I attend:</p>
<ol>
	<li><strong>The wrong people:</strong> There are usually too many people and often key individuals (decision makers and/or subject matter experts) are missing. What&#8217;s the point of holding a meeting if you can&#8217;t get the information you need and reach a decision?</li>
	<li><strong>Poor facilitation:</strong> I cannot criticise anybody for not defining a clear agenda, with defined goals/outcomes, and time boxing effectively. I am not very good at it either. At least I&#8217;m cognisant of that fact and try to mitigate it by not calling meetings! I use face to face discussion, phone calls, IM or e-mail instead.</li>
	<li><strong>The length</strong>: Most of the meetings I attend are at least an hour long. The majority of attendees are bored in half that time, because the outcomes can normally be reached in half the time if the right people are there and the meeting is well facilitated.</li>
</ol>
<p>I don&#8217;t agree with everything that David Heinmeier Hansson says, but there are some things where I think he is spot on, and this is one of them. Next time you go to book a meeting, please weigh up the cost and think about whether there is a better way to achieve the outcome you want!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/10/being-a-good-foss-citizen/">Being a Good FOSS Citizen</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-10T00:00:00+10:00" pubdate data-updated="true">Nov 10<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Do you use free and open source software? Do you contribute back? I have to hold my hands up and admit that I have not contributed back as much as I feel I should have and I feel bad about it.</p>
<p>The obvious way to contribute is with code, be that feature enhancements or bug fixes, but there are many ways in which to contribute back. You can work on documentation or subscribe to the mailing list and help out by answering questions and helping people with problems that you might have already solved. Even evangelizing about free and open source software is contributing in some way, and the one in which I have been most active.</p>
<p>However, twice in the last couple of months, I have found and fixed bugs in open source libraries. I depend very heavily on one of those libraries (<a href="http://seleniumhq.org/">WebDriver</a>) for my current project and despite the best of intentions, I still haven&#8217;t submitted a patch for the fix. My &#8220;excuse&#8221; is that I haven&#8217;t had the time to create the patch and a unit test example to demonstrate the problem and solution, but let&#8217;s face it that is a poor excuse! If I have the time to learn to use someone else&#8217;s software, and I expect it to be there in the future, then surely I can make the time to send them a fix I&#8217;ve already written?</p>
<p>So my conscience has finally got the better of me! Just as I committed to blogging once a day for 30 days to kill my procrastination about blogging, I am making a commitment to contributing patches for the fixes I have by the end of the week to kill my procrastination about contributing back too!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/09/why-doesnt-everyone-strive-for-better/">Why Doesn&#8217;t Everyone Strive for Better?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-09T00:00:00+10:00" pubdate data-updated="true">Nov 9<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Why don&#8217;t some people want to do better at their jobs? I don&#8217;t understand. I&#8217;m talking people involved in developing software here, but I&#8217;m sure the same problem affects many occupations.</p>
<p>I had one meeting last week where I made the case <em>very passionately</em> that people should be actively seeking to improve the things that they find difficult. Sadly I think it fell on deaf ears, but the discussion certainly ruffled a few feathers and acted as a catalyst for other changes that needed to happen!</p>
<p>I&#8217;ve been discussing this problem with a number of different people recently and they are as baffled as I am. The only consensus of opinion I was able to gather is that people who don&#8217;t want to improve don&#8217;t really care about their craft. Unfortunately most employers are not very good at fostering an environment that inspires people to care either, which leaves the few of us that do care being frustrated by those that don&#8217;t.</p>
<p>Ordinarily I wouldn&#8217;t post such an opinionated piece and I&#8217;ve sat on this for a number of days. In the end I decided to post something because this issue occupied my mind a lot last week, and the purpose of of this exercise is to record what is occupying my mind. I don&#8217;t expect that it will change anything, but it did make me re-evaluate what I was trying to achieve at work and why, which can only be a good thing!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/09/take-the-red-pill/">Take the Red Pill&#8230;</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-09T00:00:00+10:00" pubdate data-updated="true">Nov 9<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Right now I feel a bit like Neo being confronted by Morpheus and offered the choice of the blue pill or the red pill. Take the blue pill and I can go back to my comfortable world of Java and object orientation. Take the red pill &#8211; I learn Haskell and see how deep functional programming goes!</p>
<p>In a previous post I mentioned that I am in the process of learning functional programming in Haskell. The exercise this week was to write a monadic parser and what struck me about it was how much I was wrestling to keep a single function in my head. With Java I can hold several classes and the interactions between them in my head, and even do a half decent job with multi-threaded code (I&#8217;m sure <a href="http://blog.tmorris.net/">Tony</a> would disagree and he&#8217;s probably right, but for now I am no more disillusioned than most Java programmers).</p>
<p>I think the part of the reason I struggled is because Haskell code is a lot more dense than Java code i.e. less code does more. The type system in particular, is so rich that trying to keep track of what types were in play at each point in the function was a challenge in itself. Whilst I was working on the exercises, I got to a point where I knew the understanding I needed was just beyond my grasp, and the penny dropped just as I answered the last question!</p>
<p>It was at that point that I began to understand what one of the functions I had written early on actually did. That enabled me to clean up my code considerably because I had been rewriting the same function over and over in the subsequent questions. That in turn made the code a lot easier to reason about.</p>
<p>It really shows the importance of understanding a function before you use it. At the end of today&#8217;s lesson we had an interesting discussion about unwittingly misunderstanding code, because we think we understand it when actually we don&#8217;t. Languages like Haskell can reduce the ambiguity which reduces the chance of misunderstanding. Unfortunately, it can also lead to non-understanding for beginners like me, which isn&#8217;t much help either!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/05/mixin-it-up/">Mixin It Up</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-05T00:00:00+10:00" pubdate data-updated="true">Nov 5<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A couple of days ago I talked about using Groovy&#8217;s <code>metaClass</code> to add a method to the <code>Collection</code> class at runtime. Today, I used Groovy&#8217;s mixin mechanisms to share common functionality between two classes that don&#8217;t share the same ancestry.</p>
<p>In my original Java code, one of the classes was actually an inner class of the other. When I converted that code to Groovy I found that Groovy&#8217;s inner class support was a little bit… iffy (at least in the sense that the behaviour is not exactly the same as Java)! So I promoted the inner class to a top level class. That left me with two functions that both classes needed to share.</p>
<p>The obvious options were copy and paste (over my dead body), try and force a common parent (inheritance), or refactor the shared functions into their own classes (composition). I felt the only reasonable option was composition, but I didn&#8217;t want my new concise code being messed up with lots of indirect method calls! Having used Scala traits before I figured I would look for the Groovy equivalent.</p>
<p>My first port of call was Groovy&#8217;s <code>mixin()</code> method, which works like this:</p>
<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">Logger</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">def</span> <span class="nf">log</span><span class="o">(</span><span class="n">message</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">println</span> <span class="s">&quot;&gt; $message&quot;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">static</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">Foo</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">mixin</span> <span class="n">Logger</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">def</span> <span class="nf">bar</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">log</span> <span class="s">&quot;Foo.bar() called&quot;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Foo</span><span class="o">()</span>
</span><span class='line'><span class="n">foo</span><span class="o">.</span><span class="na">bar</span><span class="o">()</span> <span class="c1">// prints &quot;&gt; Foo.bar() called&quot;</span>
</span><span class='line'><span class="n">foo</span><span class="o">.</span><span class="na">log</span> <span class="s">&quot;log called directly on Foo instance!&quot;</span>
</span></code></pre></td></tr></table></div></figure></div></notextile></p>
<p>Perfect! Easy to implement, not too difficult to follow, and no (source code) overhead to calling the mixed in methods. I committed the code and was about to get on with the next task when I discovered another mechanism…</p>
<p>There is an <code>@Delegate</code> annotation you can place on a field within a class. It triggers an <span class="caps">AST</span> transformation which injects the interface of the delegate into the enclosing class, giving me the same net result as the <code>mixin()</code> method:</p>
<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">class</span> <span class="nc">Logger</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">def</span> <span class="nf">log</span><span class="o">(</span><span class="n">message</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">println</span> <span class="s">&quot;&gt; $message&quot;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
</span><span class='line'>    <span class="nd">@Delegate</span> <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Logger</span><span class="o">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">def</span> <span class="nf">bar</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">log</span> <span class="s">&quot;Foo.bar() called&quot;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Foo</span><span class="o">()</span>
</span><span class='line'><span class="n">foo</span><span class="o">.</span><span class="na">bar</span><span class="o">()</span> <span class="c1">// prints &quot;&gt; Foo.bar() called&quot;</span>
</span><span class='line'><span class="n">foo</span><span class="o">.</span><span class="na">log</span> <span class="s">&quot;log called directly on Foo instance!&quot;</span>
</span></code></pre></td></tr></table></div></figure></div></notextile></p>
<p>I ended up going with the <code>@Delegate</code> mechanism because the <span class="caps">IDE</span> (IntelliJ <span class="caps">IDEA</span> in my case) can resolve references to the delegated methods (because the transformation is applied at compile time) which it couldn&#8217;t do using the <code>mixin()</code> method (because it is applied at runtime). I imagine therefore, that it makes sense to use <code>@Delegate</code> on your own classes and <code>mixin()</code> on other peoples.</p>
<p>I didn&#8217;t delve into them, but there are more mechanisms available than the two I&#8217;ve highlighted here. There are <code>@Category</code> and <code>@Mixin</code> annotations and you can roll your own <span class="caps">AST</span> transformations too. They might be the subject of another blog post!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/04/is-meta-better/">Is Meta Better?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-04T00:00:00+10:00" pubdate data-updated="true">Nov 4<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Yesterday I did my first bit of meta-programming in production code. It wasn&#8217;t anything particularly fancy, but it does extend the functionality of a class (that I didn&#8217;t write) at runtime, to provide an additional function.</p>
<p>There is a really handy matcher method in the <a href="http://fest.easytesting.org/"><span class="caps">FEST</span>-Assert</a> library called <code>containsOnly()</code>, which ensures that two collections have the same contents but doesn&#8217;t care about the order. Now I&#8217;m using <a href="http://spockframework.org/">Spock</a>, I&#8217;m trying to stick to the basic Groovy assertions because Spock uses them implicitly, they are easier to read and write, and the output when an assertion fails is excellent:</p>
<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="k">assert</span> <span class="n">collectionA</span> <span class="o">==</span> <span class="n">collectionB</span>
</span><span class='line'>       <span class="o">|</span>           <span class="o">|</span>  <span class="o">|</span>
</span><span class='line'>       <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">]</span>   <span class="o">|</span>  <span class="o">[</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span>
</span><span class='line'>                   <span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure></div></notextile></p>
<p>The Groovy <span class="caps">JDK</span> already adds a whole bunch of useful methods to the stock Java collections, but there isn&#8217;t a <code>containsOnly()</code> method. However it is easy to provide the function using two of the existing methods:</p>
<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">def</span> <span class="nf">containsOnly</span><span class="o">(</span><span class="n">collection</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">size</span><span class="o">()</span> <span class="o">==</span> <span class="n">collection</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="n">containsAll</span><span class="o">(</span><span class="n">collection</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></div></notextile></p>
<p>So I added it by modifying the <code>metaClass</code> when my code is initialized:</p>
<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Collection</span><span class="o">.</span><span class="na">metaClass</span><span class="o">.</span><span class="s">&quot;containsOnly&quot;</span> <span class="o">=</span> <span class="o">{</span> <span class="n">Collection</span> <span class="n">other</span> <span class="o">-&gt;</span>
</span><span class='line'>    <span class="n">size</span><span class="o">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="n">containsAll</span><span class="o">(</span><span class="n">other</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></div></notextile></p>
<p>And it works beautifully. The question is whether or not it is better than trying to solve the problem some other way, such as using a proxy class or a utility class to provide the extra function? It would certainly be easier to track where the <code>containsOnly()</code> method is defined, rather than it appearing by magic as it does with meta-programming (unless you know in advance where the metaClass extension is being done). On the flip side, it takes a lot more code to do the same using a proxy or utility class, and only a proxy would allow me to keep the <span class="caps">API</span> I want in this case.</p>
<p>I guess in the end it&#8217;s a swings and roundabouts argument. What you gain with one you lose with the other. Both introduce some overhead to future maintenance of the code. It&#8217;s just that it might not be obvious to the person that comes after you where that overhead is if you&#8217;re using meta-programming!</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/04/follow-the-types/">Follow the Types (Not the White Rabbit)!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-04T00:00:00+10:00" pubdate data-updated="true">Nov 4<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For a while I have been trying to learn <a href="http://www.haskell.org/">Haskell</a> as a way of getting my head completely around functional programming. I started with &#8220;<a href="http://www.pragprog.com/titles/btlang/seven-languages-in-seven-weeks">Seven Languages in Seven Weeks</a>&#8221;, moved on to &#8220;<a href="http://www.realworldhaskell.org/">Real World Haskell</a>&#8221;, and now, <a href="http://blog.tmorris.net/">Tony Morris</a> is very kindly donating some of his time to help me and a few other guys to get to grips with the concepts that underpin the language.</p>
<p>Every week, he sets exercises for us to complete, which involves writing solutions to a bunch of functions that pass the acceptance tests that he supplied. This week we are writing a parser, but the real challenge for me is that none of the tests will pass until all of the functions have been completed. Writing around 20 functions before being able to get any feedback is almost a bigger challenge than writing the functions themselves!</p>
<p>Tony&#8217;s advice was to &#8220;follow the types&#8221; and I&#8217;m sure he is right. If you follow the type signatures and you have a vague notion of what the function is supposed to do, there are only a limited number of options open to you. The HaskellWiki also says that &#8220;<a href="http://www.haskell.org/haskellwiki/Why_Haskell_just_works">Once your code compiles it usually works</a>&#8221;. I&#8217;m halfway through the functions and really hoping that is true! Perhaps I&#8217;ll report back in a future post.</p>
<p>In any case, I can already say that what I have learned so far has influenced the code I write, and I can only see good things coming from having a better understanding of type theory and functional programming.</p></div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/11/02/consoling-oneself/">Consoling Oneself</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-11-02T00:00:00+10:00" pubdate data-updated="true">Nov 2<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The last time I used the <a href="http://groovy.codehaus.org/Groovy+Console">Groovy Console</a> (several years ago) it was painful, but now I have to say that it is one of the most useful tools I&#8217;ve come across.</p>
<p>The thing I like about it is that you have an actual editor, so you can work multi-line statements. It means that you can write small classes and then refine them, which can be difficult in a genuine <span class="caps">REPL</span>. And because everything is there right in front of you, when you make the inevitable mistake, you can look back at what you have written and correct it far more easily.</p>
<p>In fact I&#8217;ve found it so useful, that I&#8217;ve started using it whenever I want to do a quick spike to investigate an idea, or refresh my memory about some <span class="caps">API</span>. It&#8217;s also ridiculously easy to embed a console into your application which allows you to access everything that is on your classpath (assuming that Groovy is also on your classpath of course!):</p>
<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">import</span> <span class="nn">groovy.ui.Console</span>
</span><span class='line'>
</span><span class='line'><span class="n">def</span> <span class="n">console</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Console</span><span class="o">()</span>
</span><span class='line'><span class="n">console</span><span class="o">.</span><span class="na">setVariable</span><span class="o">(</span><span class="s">&quot;foo&quot;</span><span class="o">,</span> <span class="s">&quot;bar&quot;</span><span class="o">)</span>
</span><span class='line'><span class="n">console</span><span class="o">.</span><span class="na">run</span><span class="o">()</span>
</span></code></pre></td></tr></table></div></figure></div></notextile></p>
<p>I&#8217;m using this as a debug aid in my current project, which uses a private in-memory database initialized from another system at startup. With the embedded console, I can run the initialization and then inspect the contents of the database when queries are not behaving as expected, to quickly find and fix the cause of the problem. I&#8217;ve also been able to very quickly prototype new ideas, then cut and paste the code into the application proper, as a starting point for the production code. For me, being able to interactively execute code in my application at runtime has been a massive productivity boost.</p>
<p>And of course, you don&#8217;t have to programming in Groovy to use it. You could just include the Groovy jar and your Console bootstrap class in a debug build of your Java project!</p></div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/06/14/playing-with-concordion/">Play!ing with Concordion</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/07/29/can-kotlin-ko-contenders/">Can Kotlin K.O. contenders?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/07/28/my-technology-radar/">My technology radar</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/07/15/uberconf/">Uberconf, Uber Geeks, Uber Tired!</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/23/what-is-functional-programming/">What is functional programming?</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/aspinall">@aspinall</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'aspinall',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("aspinall", 3, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/aspinall" class="twitter-follow-button" data-show-count="false">Follow @aspinall</a>
  
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/113713214458786855972?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <a href="http://au.linkedin.com/in/caspinall"><img src="http://www.linkedin.com/img/webpromo/btn_profile_greytxt_80x15.png" width="80" height="15" border="0" alt="View Craig Aspinall's profile on LinkedIn"></a>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  This work is licensed under a <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 Unported License</a>.
</p>
<p>
  Copyright &copy; 2012 - Craig Aspinall -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'craigaspinall';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
